
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">

<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    <title>porcupine.utils — Handy utility functions and classes &#8212; Porcupine API 0.28.1 documentation</title>
    <link rel="stylesheet" href="_static/alabaster.css" type="text/css" />
    <link rel="stylesheet" href="_static/pygments.css" type="text/css" />
    <script type="text/javascript">
      var DOCUMENTATION_OPTIONS = {
        URL_ROOT:    './',
        VERSION:     '0.28.1',
        COLLAPSE_INDEX: false,
        FILE_SUFFIX: '.html',
        HAS_SOURCE:  true,
        SOURCELINK_SUFFIX: '.txt'
      };
    </script>
    <script type="text/javascript" src="_static/jquery.js"></script>
    <script type="text/javascript" src="_static/underscore.js"></script>
    <script type="text/javascript" src="_static/doctools.js"></script>
    <link rel="index" title="Index" href="genindex.html" />
    <link rel="search" title="Search" href="search.html" />
    <link rel="prev" title="porcupine.settings — Porcupine’s setting manager" href="settings.html" />
   
  <link rel="stylesheet" href="_static/custom.css" type="text/css" />
  
  
  <meta name="viewport" content="width=device-width, initial-scale=0.9, maximum-scale=0.9" />

  </head>
  <body>
  

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          <div class="body" role="main">
            
  <div class="section" id="module-porcupine.utils">
<span id="porcupine-utils-handy-utility-functions-and-classes"></span><h1><a class="reference internal" href="#module-porcupine.utils" title="porcupine.utils"><code class="xref py py-mod docutils literal"><span class="pre">porcupine.utils</span></code></a> — Handy utility functions and classes<a class="headerlink" href="#module-porcupine.utils" title="Permalink to this headline">¶</a></h1>
<p>This module contains handy things that Porcupine uses internally and
plugins can use freely.</p>
<div class="section" id="callback-hook-classes">
<h2>Callback Hook Classes<a class="headerlink" href="#callback-hook-classes" title="Permalink to this headline">¶</a></h2>
<p>These classes are used for running callbacks in Porcupine:</p>
</div>
<div class="section" id="information-about-python">
<h2>Information about Python<a class="headerlink" href="#information-about-python" title="Permalink to this headline">¶</a></h2>
<dl class="data">
<dt id="porcupine.utils.running_pythonw">
<code class="descclassname">porcupine.utils.</code><code class="descname">running_pythonw</code><a class="headerlink" href="#porcupine.utils.running_pythonw" title="Permalink to this definition">¶</a></dt>
<dd><p>This is True if Python is running in pythonw.exe on Windows.</p>
<p>The pythonw.exe program runs Python scripts without a command
prompt, so you need to check for that when doing things like
starting a new command prompt from Python.</p>
</dd></dl>

<dl class="data">
<dt id="porcupine.utils.python">
<code class="descclassname">porcupine.utils.</code><code class="descname">python</code><a class="headerlink" href="#porcupine.utils.python" title="Permalink to this definition">¶</a></dt>
<dd><p>If <a class="reference internal" href="#porcupine.utils.running_pythonw" title="porcupine.utils.running_pythonw"><code class="xref py py-data docutils literal"><span class="pre">running_pythonw</span></code></a> is False, this is
<a class="reference external" href="https://docs.python.org/3/library/sys.html#sys.executable" title="(in Python v3.6)"><code class="xref py py-data docutils literal"><span class="pre">sys.executable</span></code></a>. This should point to the real python.exe
when running in pythonw.exe.</p>
</dd></dl>

</div>
<div class="section" id="tkinter-utilities">
<h2>Tkinter Utilities<a class="headerlink" href="#tkinter-utilities" title="Permalink to this headline">¶</a></h2>
<dl class="class">
<dt id="porcupine.utils.Checkbox">
<em class="property">class </em><code class="descclassname">porcupine.utils.</code><code class="descname">Checkbox</code><span class="sig-paren">(</span><em>*args</em>, <em>**kwargs</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/porcupine/utils.html#Checkbox"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#porcupine.utils.Checkbox" title="Permalink to this definition">¶</a></dt>
<dd><p>Like <code class="docutils literal"><span class="pre">tkinter.Checkbutton</span></code>, but works with my dark GTK+ theme.</p>
<p>Tkinter’s Checkbutton displays a white checkmark on a white
background on my dark GTK+ theme (BlackMATE on Mate 1.8). This class
fixes that.</p>
</dd></dl>

<dl class="function">
<dt id="porcupine.utils.copy_bindings">
<code class="descclassname">porcupine.utils.</code><code class="descname">copy_bindings</code><span class="sig-paren">(</span><em>widget1</em>, <em>widget2</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/porcupine/utils.html#copy_bindings"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#porcupine.utils.copy_bindings" title="Permalink to this definition">¶</a></dt>
<dd><p>Add all bindings of <em>widget1</em> to <em>widget2</em>.</p>
<p>You may need to call <code class="docutils literal"><span class="pre">copy_bindings(porcupine.get_main_window(),</span> <span class="pre">widget)</span></code>
on widgets that can be focused by clicking them, like <code class="docutils literal"><span class="pre">Text</span></code> and
<code class="docutils literal"><span class="pre">Entry</span></code> widgets. Porcupine’s keyboard bindings return <code class="docutils literal"><span class="pre">'break'</span></code>
and are bound to the main window, and thus work by default, but in
some cases returning <code class="docutils literal"><span class="pre">'break'</span></code> doesn’t do anything when the focus
is in another widget inside the main window.</p>
</dd></dl>

<dl class="function">
<dt id="porcupine.utils.bind_mouse_wheel">
<code class="descclassname">porcupine.utils.</code><code class="descname">bind_mouse_wheel</code><span class="sig-paren">(</span><em>widget</em>, <em>callback</em>, <em>*</em>, <em>prefixes=''</em>, <em>**bind_kwargs</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/porcupine/utils.html#bind_mouse_wheel"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#porcupine.utils.bind_mouse_wheel" title="Permalink to this definition">¶</a></dt>
<dd><p>Bind mouse wheel events to callback.</p>
<p>The callback will be called like <code class="docutils literal"><span class="pre">callback(direction)</span></code> where
<em>direction</em> is <code class="docutils literal"><span class="pre">'up'</span></code> or <code class="docutils literal"><span class="pre">'down'</span></code>. The <em>prefixes</em> argument can
be used to change the binding string. For example,
<code class="docutils literal"><span class="pre">prefixes='Control-'</span></code> means that callback will be ran when the
user holds down Control and rolls the wheel.</p>
</dd></dl>

<dl class="function">
<dt id="porcupine.utils.run_in_thread">
<code class="descclassname">porcupine.utils.</code><code class="descname">run_in_thread</code><span class="sig-paren">(</span><em>blocking_function</em>, <em>done_callback</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/porcupine/utils.html#run_in_thread"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#porcupine.utils.run_in_thread" title="Permalink to this definition">¶</a></dt>
<dd><p>Run <code class="docutils literal"><span class="pre">blocking_function()</span></code> in another thread.</p>
<p>If the <em>blocking_function</em> raises an error,
<code class="docutils literal"><span class="pre">done_callback(False,</span> <span class="pre">traceback)</span></code> will be called where <em>traceback</em>
is the error message as a string. If no errors are raised,
<code class="docutils literal"><span class="pre">done_callback(True,</span> <span class="pre">result)</span></code> will be called where <em>result</em> is the
return value from <em>blocking_function</em>. The <em>done_callback</em> is always
called from Tk’s main loop, so it can do things with Tkinter widgets
unlike <em>blocking_function</em>.</p>
</dd></dl>

<dl class="function">
<dt id="porcupine.utils.get_image">
<code class="descclassname">porcupine.utils.</code><code class="descname">get_image</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="_modules/porcupine/utils.html#get_image"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#porcupine.utils.get_image" title="Permalink to this definition">¶</a></dt>
<dd><p>Create a <code class="docutils literal"><span class="pre">tkinter.PhotoImage</span></code> from a file in <code class="docutils literal"><span class="pre">porcupine/images</span></code>.</p>
<p>This function is cached and the cache holds references to all
returned images, so there’s no need to worry about calling this
function too many times or keeping references to the returned
images.</p>
</dd></dl>

<dl class="function">
<dt id="porcupine.utils.errordialog">
<code class="descclassname">porcupine.utils.</code><code class="descname">errordialog</code><span class="sig-paren">(</span><em>title</em>, <em>message</em>, <em>monospace_text=None</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/porcupine/utils.html#errordialog"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#porcupine.utils.errordialog" title="Permalink to this definition">¶</a></dt>
<dd><p>This is a lot like <code class="docutils literal"><span class="pre">tkinter.messagebox.showerror</span></code>.</p>
<p>Don’t rely on this, I’ll probably move this to
<a class="reference internal" href="dialogs.html#module-porcupine.dialogs" title="porcupine.dialogs"><code class="xref py py-mod docutils literal"><span class="pre">porcupine.dialogs</span></code></a> later.</p>
<p>This function can be called with or without creating a root window
first. If <em>monospace_text</em> is not None, it will be displayed below
the message in a <code class="docutils literal"><span class="pre">tkinter.Text</span></code> widget.</p>
<p>Example:</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="k">try</span><span class="p">:</span>
    <span class="n">do</span> <span class="n">something</span>
<span class="k">except</span> <span class="n">SomeError</span><span class="p">:</span>
    <span class="n">utils</span><span class="o">.</span><span class="n">errordialog</span><span class="p">(</span><span class="s2">&quot;Oh no&quot;</span><span class="p">,</span> <span class="s2">&quot;Doing something failed!&quot;</span><span class="p">,</span>
                      <span class="n">traceback</span><span class="o">.</span><span class="n">format_exc</span><span class="p">())</span>
</pre></div>
</div>
</dd></dl>

</div>
<div class="section" id="miscellaneous">
<h2>Miscellaneous<a class="headerlink" href="#miscellaneous" title="Permalink to this headline">¶</a></h2>
<dl class="function">
<dt id="porcupine.utils.backup_open">
<code class="descclassname">porcupine.utils.</code><code class="descname">backup_open</code><span class="sig-paren">(</span><em>path</em>, <em>*args</em>, <em>**kwargs</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/porcupine/utils.html#backup_open"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#porcupine.utils.backup_open" title="Permalink to this definition">¶</a></dt>
<dd><p>Like <a class="reference external" href="https://docs.python.org/3/library/functions.html#open" title="(in Python v3.6)"><code class="xref py py-func docutils literal"><span class="pre">open()</span></code></a>, but uses a backup file if needed.</p>
<p>This is useless with modes like <code class="docutils literal"><span class="pre">'r'</span></code> because they don’t modify
the file, but this is useful when overwriting the user’s files.</p>
<p>This needs to be used as a context manager. For example:</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="k">try</span><span class="p">:</span>
    <span class="k">with</span> <span class="n">utils</span><span class="o">.</span><span class="n">backup_open</span><span class="p">(</span><span class="n">cool_file</span><span class="p">,</span> <span class="s1">&#39;w&#39;</span><span class="p">)</span> <span class="k">as</span> <span class="n">file</span><span class="p">:</span>
        <span class="o">...</span>
<span class="k">except</span> <span class="p">(</span><span class="ne">UnicodeError</span><span class="p">,</span> <span class="ne">OSError</span><span class="p">):</span>
    <span class="c1"># log the error and report it to the user</span>
</pre></div>
</div>
<p>This automatically restores from the backup on failure.</p>
</dd></dl>

<dl class="function">
<dt id="porcupine.utils.invert_color">
<code class="descclassname">porcupine.utils.</code><code class="descname">invert_color</code><span class="sig-paren">(</span><em>color</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/porcupine/utils.html#invert_color"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#porcupine.utils.invert_color" title="Permalink to this definition">¶</a></dt>
<dd><p>Return a color with opposite red, green and blue values.</p>
<p>Example: <code class="docutils literal"><span class="pre">invert_color('white')</span></code> is <code class="docutils literal"><span class="pre">'#000000'</span></code> (black).</p>
<p>This function uses tkinter for converting the color to RGB. That’s
why a tkinter root window must have been created, but <em>color</em> can be
any Tk-compatible color string, like a color name or a <code class="docutils literal"><span class="pre">'#rrggbb'</span></code>
string.</p>
<p>The return value is always a <code class="docutils literal"><span class="pre">'#rrggbb</span></code> string (also compatible
with Tk).</p>
</dd></dl>

</div>
</div>


          </div>
        </div>
      </div>
      <div class="sphinxsidebar" role="navigation" aria-label="main navigation">
        <div class="sphinxsidebarwrapper">
  <h3><a href="index.html">Table Of Contents</a></h3>
  <ul>
<li><a class="reference internal" href="#"><code class="docutils literal"><span class="pre">porcupine.utils</span></code> — Handy utility functions and classes</a><ul>
<li><a class="reference internal" href="#callback-hook-classes">Callback Hook Classes</a></li>
<li><a class="reference internal" href="#information-about-python">Information about Python</a></li>
<li><a class="reference internal" href="#tkinter-utilities">Tkinter Utilities</a></li>
<li><a class="reference internal" href="#miscellaneous">Miscellaneous</a></li>
</ul>
</li>
</ul>
<div class="relations">
<h3>Related Topics</h3>
<ul>
  <li><a href="index.html">Documentation overview</a><ul>
      <li>Previous: <a href="settings.html" title="previous chapter"><code class="docutils literal"><span class="pre">porcupine.settings</span></code> — Porcupine’s setting manager</a></li>
  </ul></li>
</ul>
</div>
  <div role="note" aria-label="source link">
    <h3>This Page</h3>
    <ul class="this-page-menu">
      <li><a href="_sources/utils.rst.txt"
            rel="nofollow">Show Source</a></li>
    </ul>
   </div>
<div id="searchbox" style="display: none" role="search">
  <h3>Quick search</h3>
    <form class="search" action="search.html" method="get">
      <div><input type="text" name="q" /></div>
      <div><input type="submit" value="Go" /></div>
      <input type="hidden" name="check_keywords" value="yes" />
      <input type="hidden" name="area" value="default" />
    </form>
</div>
<script type="text/javascript">$('#searchbox').show(0);</script>
        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="footer">
      &copy;2017, Akuli.
      
      |
      Powered by <a href="http://sphinx-doc.org/">Sphinx 1.6.3</a>
      &amp; <a href="https://github.com/bitprophet/alabaster">Alabaster 0.7.10</a>
      
      |
      <a href="_sources/utils.rst.txt"
          rel="nofollow">Page source</a>
    </div>

    

    
  </body>
</html>