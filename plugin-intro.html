
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">

<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    <title>Introduction to Writing Plugins &#8212; Porcupine API 0.32.0 documentation</title>
    <link rel="stylesheet" href="_static/alabaster.css" type="text/css" />
    <link rel="stylesheet" href="_static/pygments.css" type="text/css" />
    <script type="text/javascript">
      var DOCUMENTATION_OPTIONS = {
        URL_ROOT:    './',
        VERSION:     '0.32.0',
        COLLAPSE_INDEX: false,
        FILE_SUFFIX: '.html',
        HAS_SOURCE:  true,
        SOURCELINK_SUFFIX: '.txt'
      };
    </script>
    <script type="text/javascript" src="_static/jquery.js"></script>
    <script type="text/javascript" src="_static/underscore.js"></script>
    <script type="text/javascript" src="_static/doctools.js"></script>
    <link rel="index" title="Index" href="genindex.html" />
    <link rel="search" title="Search" href="search.html" />
    <link rel="next" title="porcupine — The top level Porcupine package" href="porcupine.html" />
    <link rel="prev" title="Welcome to Porcupine’s plugin API documentation!" href="index.html" />
   
  <link rel="stylesheet" href="_static/custom.css" type="text/css" />
  
  
  <meta name="viewport" content="width=device-width, initial-scale=0.9, maximum-scale=0.9" />

  </head>
  <body>
  

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          <div class="body" role="main">
            
  <div class="section" id="introduction-to-writing-plugins">
<span id="plugin-intro"></span><h1>Introduction to Writing Plugins<a class="headerlink" href="#introduction-to-writing-plugins" title="Permalink to this headline">¶</a></h1>
<p>Porcupine is written in Python 3, and it can be extended a lot by writing
plugins for it in Python 3. Writing plugins is easy, but this tutorial and
Porcupine’s API documentation assume
<a class="reference external" href="https://github.com/Akuli/tkinter-tutorial">basic tkinter skills</a>.</p>
<div class="section" id="where-are-the-plugins">
<h2>Where are the plugins?<a class="headerlink" href="#where-are-the-plugins" title="Permalink to this headline">¶</a></h2>
<p>Porcupine searches for plugins in two places. The plugins that come with
Porcupine are installed along with it, but Porcupine also creates a user-wide
<code class="docutils literal"><span class="pre">plugins</span></code> folder in its config directory. You can check where it is using
Python:</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="kn">import</span> <span class="nn">porcupine.plugins</span>
<span class="gp">&gt;&gt;&gt; </span><span class="nb">print</span><span class="p">(</span><span class="n">porcupine</span><span class="o">.</span><span class="n">plugins</span><span class="o">.</span><span class="n">__path__</span><span class="p">[</span><span class="mi">0</span><span class="p">])</span>
<span class="go">/home/akuli/.config/porcupine/plugins</span>
</pre></div>
</div>
<p>Of course, your plugins are probably not in <code class="docutils literal"><span class="pre">/home/akuli/.config/porcupine/plugins</span></code>,
so you need to run the above commands yourself to find out where your plugins
should go. Rest of this tutorial calls this place <strong>the plugin directory</strong>.</p>
<p>Your plugin directory is empty by default. The plugins that come with Porcupine
are installed in a different place:</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="nb">print</span><span class="p">(</span><span class="n">porcupine</span><span class="o">.</span><span class="n">plugins</span><span class="o">.</span><span class="n">__path__</span><span class="p">[</span><span class="mi">1</span><span class="p">])</span>
<span class="go">/home/akuli/.local/lib/python3.7/site-packages/porcupine/plugins</span>
</pre></div>
</div>
</div>
<div class="section" id="hello-world">
<h2>Hello World!<a class="headerlink" href="#hello-world" title="Permalink to this headline">¶</a></h2>
<p>Create a <code class="docutils literal"><span class="pre">hello.py</span></code> to your plugin directory, and add this code to it:</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">tkinter</span> <span class="k">import</span> <span class="n">messagebox</span>
<span class="kn">import</span> <span class="nn">porcupine</span>

<span class="k">def</span> <span class="nf">hello</span><span class="p">():</span>
    <span class="n">messagebox</span><span class="o">.</span><span class="n">showinfo</span><span class="p">(</span><span class="s2">&quot;Hello&quot;</span><span class="p">,</span> <span class="s2">&quot;Hello World!&quot;</span><span class="p">)</span>

<span class="k">def</span> <span class="nf">setup</span><span class="p">():</span>
    <span class="n">porcupine</span><span class="o">.</span><span class="n">add_action</span><span class="p">(</span><span class="n">hello</span><span class="p">,</span> <span class="s1">&#39;Hello/Hello World&#39;</span><span class="p">)</span>
</pre></div>
</div>
<p>Restart Porcupine. You should see a new <em>Hello</em> menu in the menubar with a
<em>Hello World</em> button in it. Clicking that button runs the <code class="docutils literal"><span class="pre">hello()</span></code>
function.</p>
<p>Some details:</p>
<blockquote>
<div><ul>
<li><p class="first">You can also add actions to menus that Porcupine created, like
<code class="docutils literal"><span class="pre">porcupine.add_action(hello,</span> <span class="pre">'Run/Hello')</span></code>.</p>
</li>
<li><p class="first">Usually plugins are files, but directories with an <code class="docutils literal"><span class="pre">__init__.py</span></code> in them
work as well.</p>
</li>
<li><p class="first">File and directory names starting with <code class="docutils literal"><span class="pre">_</span></code> are ignored.</p>
</li>
<li><p class="first">Each plugin must define a <code class="docutils literal"><span class="pre">setup()</span></code> function. If your plugin is a package,
the <code class="docutils literal"><span class="pre">setup()</span></code> function must be exposed in <code class="docutils literal"><span class="pre">__init__.py</span></code>. Porcupine calls
this function on startup before opening any tabs.</p>
</li>
<li><p class="first">Plugins are imported in an arbitary order, but you can control the order that
the setup functions are called in. For example, you could add this code to
<code class="docutils literal"><span class="pre">hello.py</span></code>:</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="n">setup_before</span> <span class="o">=</span> <span class="p">[</span><span class="s1">&#39;tabs2spaces&#39;</span><span class="p">]</span>
<span class="n">setup_after</span> <span class="o">=</span> <span class="p">[</span><span class="s1">&#39;fullscreen&#39;</span><span class="p">]</span>
</pre></div>
</div>
<p>Now our <code class="docutils literal"><span class="pre">setup()</span></code> function is guaranteed to be called before setting up
<a class="reference external" href="https://github.com/Akuli/porcupine/tree/master/porcupine/plugins/tabs2spaces.py">tabs2spaces.py</a>, and
<a class="reference external" href="https://github.com/Akuli/porcupine/tree/master/porcupine/plugins/fullscreen.py">fullscreen.py</a>’s <code class="docutils literal"><span class="pre">setup()</span></code> is
always called before our <code class="docutils literal"><span class="pre">setup()</span></code>.</p>
</li>
</ul>
</div></blockquote>
</div>
<div class="section" id="a-step-back">
<h2>A Step Back<a class="headerlink" href="#a-step-back" title="Permalink to this headline">¶</a></h2>
<p>Porcupine’s plugin API is powerful, and many of Porcupine’s features are
implemented as plugins. They come with Porcupine (see <a class="reference internal" href="#where-are-the-plugins">Where are the plugins?</a>
above), but you can also <a class="reference external" href="https://github.com/Akuli/porcupine/tree/master/porcupine/plugins">read them on GitHub</a>.</p>
<p>This tutorial is all about writing <em>more</em> plugins, but we’ll start by running
Porcupine with <em>no</em> plugins at all just to get an idea of how much can be done
with plugins. Open a command prompt or terminal and run this command on it:</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="n">porcupine</span> <span class="o">--</span><span class="n">no</span><span class="o">-</span><span class="n">plugins</span>
</pre></div>
</div>
<p>This will run Porcupine without any plugins, and it is minimal. You can edit
files with it, but that’s about it. Plugins can do <strong>a lot</strong>.</p>
</div>
<div class="section" id="porcupine-s-widgets">
<h2>Porcupine’s Widgets<a class="headerlink" href="#porcupine-s-widgets" title="Permalink to this headline">¶</a></h2>
<p>Here are the widgets that Porcupine itself creates without any plugins:</p>
<img alt="_images/no-plugins.png" src="_images/no-plugins.png" />
<div class="line-block">
<div class="line"><br /></div>
</div>
<dl class="docutils">
<dt>❶ Main Window</dt>
<dd>Everything is inside this widget. Usually it’s a <code class="docutils literal"><span class="pre">tkinter.Tk</span></code> root
window, but it may be a <code class="docutils literal"><span class="pre">Toplevel</span></code> widget as well. You can
access this widget with <a class="reference internal" href="porcupine.html#porcupine.get_main_window" title="porcupine.get_main_window"><code class="xref py py-func docutils literal"><span class="pre">porcupine.get_main_window()</span></code></a>.</dd>
<dt>❷ Menu Bar</dt>
<dd>The <code class="xref py py-mod docutils literal"><span class="pre">porcupine.menubar</span></code> module contains functions for accessing this
widget and adding more items to it. However, most of the time it’s easiest
to use <a class="reference internal" href="porcupine.html#porcupine.add_action" title="porcupine.add_action"><code class="xref py py-func docutils literal"><span class="pre">porcupine.add_action()</span></code></a> as shown above.</dd>
<dt>❸ Tab Manager</dt>
<dd>This widget contains tabs (see below), and a welcome message when there are
no tabs to display. This widget is a <a class="reference internal" href="tabs.html#porcupine.tabs.TabManager" title="porcupine.tabs.TabManager"><code class="xref py py-class docutils literal"><span class="pre">porcupine.tabs.TabManager</span></code></a> and
can be accessed with <a class="reference internal" href="porcupine.html#porcupine.get_tab_manager" title="porcupine.get_tab_manager"><code class="xref py py-func docutils literal"><span class="pre">porcupine.get_tab_manager()</span></code></a>.</dd>
<dt>❹ A Tab</dt>
<dd><p class="first">Tabs are <a class="reference internal" href="tabs.html#porcupine.tabs.Tab" title="porcupine.tabs.Tab"><code class="xref py py-class docutils literal"><span class="pre">porcupine.tabs.Tab</span></code></a> widgets, and you can access them with
the tab manager’s <a class="reference internal" href="tabs.html#porcupine.tabs.TabManager.tabs" title="porcupine.tabs.TabManager.tabs"><code class="xref py py-attr docutils literal"><span class="pre">tabs</span></code></a> attribute.
This tab is a <a class="reference internal" href="tabs.html#porcupine.tabs.FileTab" title="porcupine.tabs.FileTab"><code class="xref py py-class docutils literal"><span class="pre">porcupine.tabs.FileTab</span></code></a> because it represents a new
file. The text widget and scroll bar are just widgets packed inside the tab.
The <code class="docutils literal"><span class="pre">New</span> <span class="pre">File</span></code> label can be accessed with the tab’s
<a class="reference internal" href="tabs.html#porcupine.tabs.Tab.top_label" title="porcupine.tabs.Tab.top_label"><code class="xref py py-attr docutils literal"><span class="pre">top_label</span></code></a> attribute, but it’s not
packed inside the tab.</p>
<p class="last">Not all tabs need to be file tabs. In fact, you can easily create custom
kinds of tabs that contain any Tk widgets. See <a class="reference internal" href="tabs.html#module-porcupine.tabs" title="porcupine.tabs"><code class="xref py py-mod docutils literal"><span class="pre">porcupine.tabs</span></code></a>
for more instructions.</p>
</dd>
</dl>
<p>That should be plenty of useful links for you to get started with things.</p>
</div>
<div class="section" id="virtual-events">
<span id="id1"></span><h2>Virtual Events<a class="headerlink" href="#virtual-events" title="Permalink to this headline">¶</a></h2>
<p>I added this short section here because not all tkinter users have seen virtual
events before. For example, code like this prints <code class="docutils literal"><span class="pre">hi</span></code>:</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="k">def</span> <span class="nf">print_hi</span><span class="p">(</span><span class="n">event</span><span class="p">):</span>
    <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;hi&quot;</span><span class="p">)</span>

<span class="n">some_widget</span><span class="o">.</span><span class="n">bind</span><span class="p">(</span><span class="s1">&#39;&lt;&lt;PrintHi&gt;&gt;&#39;</span><span class="p">,</span> <span class="n">print_hi</span><span class="p">)</span>
<span class="n">some_widget</span><span class="o">.</span><span class="n">event_generate</span><span class="p">(</span><span class="s1">&#39;&lt;&lt;PrintHi&gt;&gt;&#39;</span><span class="p">)</span>
</pre></div>
</div>
<p>Note that virtual event names must be between <code class="docutils literal"><span class="pre">&lt;&lt;</span></code> and <code class="docutils literal"><span class="pre">&gt;&gt;</span></code>, just <code class="docutils literal"><span class="pre">&lt;</span></code> and
<code class="docutils literal"><span class="pre">&gt;</span></code> are not enough. Porcupine generates some virtual events, and you can bind
to them in plugins.</p>
<p>Be careful to spell virtual event names correctly. We didn’t really define the
<code class="docutils literal"><span class="pre">&lt;&lt;PrintHi&gt;&gt;</span></code> event anywhere, so if we spell <code class="docutils literal"><span class="pre">&lt;PrintHi&gt;&gt;</span></code> correctly in one
place and misspell it like <code class="docutils literal"><span class="pre">&lt;&lt;PirntHi&gt;&gt;</span></code> somewhere else we don’t get any
errors. Porcupine’s autocompletion is useful for this.</p>
</div>
<div class="section" id="potential-pitfalls">
<h2>Potential Pitfalls<a class="headerlink" href="#potential-pitfalls" title="Permalink to this headline">¶</a></h2>
<p>Most tkinter things work in Porcupine like you would expect them to work, but
there are a few things that you should be aware of.</p>
<div class="section" id="use-add-true">
<h3>Use add=True<a class="headerlink" href="#use-add-true" title="Permalink to this headline">¶</a></h3>
<p>When you bind something that another plugin might need to bind as well, use the
<code class="docutils literal"><span class="pre">add=True</span></code> argument to <code class="docutils literal"><span class="pre">bind()</span></code>. For example, let’s say you have something
like this:</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="k">def</span> <span class="nf">callback1</span><span class="p">(</span><span class="n">event</span><span class="p">):</span>
    <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;lol&quot;</span><span class="p">)</span>

<span class="k">def</span> <span class="nf">callback2</span><span class="p">(</span><span class="n">event</span><span class="p">):</span>
    <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;wut&quot;</span><span class="p">)</span>

<span class="n">some_widget</span><span class="o">.</span><span class="n">bind</span><span class="p">(</span><span class="s1">&#39;&lt;Button-1&gt;&#39;</span><span class="p">,</span> <span class="n">callback1</span><span class="p">)</span>
<span class="n">some_widget</span><span class="o">.</span><span class="n">bind</span><span class="p">(</span><span class="s1">&#39;&lt;Button-1&gt;&#39;</span><span class="p">,</span> <span class="n">callback2</span><span class="p">)</span>    <span class="c1"># now clicking the widget doesn&#39;t print lol</span>
</pre></div>
</div>
<p><strong>This code is bad!</strong> Now <code class="docutils literal"><span class="pre">callback1</span></code> doesn’t run at all because binding
<code class="docutils literal"><span class="pre">callback2</span></code> discarded the old binding. Everything would be fine
if we had done this instead:</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="n">some_widget</span><span class="o">.</span><span class="n">bind</span><span class="p">(</span><span class="s1">&#39;&lt;Control-Return&gt;&#39;</span><span class="p">,</span> <span class="n">callback1</span><span class="p">,</span> <span class="n">add</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
<span class="n">some_widget</span><span class="o">.</span><span class="n">bind</span><span class="p">(</span><span class="s1">&#39;&lt;Control-Return&gt;&#39;</span><span class="p">,</span> <span class="n">callback2</span><span class="p">,</span> <span class="n">add</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
<span class="c1"># now they&#39;re both bound</span>
</pre></div>
</div>
<p>Unfortunately tkinter’s <code class="docutils literal"><span class="pre">unbind()</span></code> method is stupid and it unbinds
everything, regardless of the second argument passed into it (see
<a class="reference external" href="https://github.com/python/cpython/blob/dff9b5f9d62a/Lib/tkinter/__init__.py#L1249">the source code</a>).
If you need to bind and unbind something use
<a class="reference internal" href="utils.html#porcupine.utils.temporary_bind" title="porcupine.utils.temporary_bind"><code class="xref py py-func docutils literal"><span class="pre">porcupine.utils.temporary_bind()</span></code></a>, and let me know that you needed it so I
won’t delete it.</p>
</div>
<div class="section" id="binding-key-presses">
<h3>Binding Key Presses<a class="headerlink" href="#binding-key-presses" title="Permalink to this headline">¶</a></h3>
<p>If you want to bind a key press <strong>globally</strong> you should use
<a class="reference internal" href="porcupine.html#porcupine.add_action" title="porcupine.add_action"><code class="xref py py-func docutils literal"><span class="pre">porcupine.add_action()</span></code></a> in most cases, but you can also bind on the main
window, like this:</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="k">def</span> <span class="nf">print_hello</span><span class="p">(</span><span class="n">event</span><span class="p">):</span>
    <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;Hello World!&quot;</span><span class="p">)</span>
    <span class="k">return</span> <span class="s1">&#39;break&#39;</span>

<span class="k">def</span> <span class="nf">setup</span><span class="p">():</span>
    <span class="n">porcupine</span><span class="o">.</span><span class="n">get_main_window</span><span class="p">()</span><span class="o">.</span><span class="n">bind</span><span class="p">(</span><span class="s1">&#39;&lt;Control-g&gt;&#39;</span><span class="p">,</span> <span class="n">print_hello</span><span class="p">,</span> <span class="n">add</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
</pre></div>
</div>
<p>Now pressing <code class="docutils literal"><span class="pre">Ctrl+G</span></code> in <em>any</em> Porcupine widget runs <code class="docutils literal"><span class="pre">print_hello</span></code>.</p>
<p>Note that the binding returns <code class="docutils literal"><span class="pre">'break'</span></code>. This way, if tkinter does something
by default when <code class="docutils literal"><span class="pre">Ctrl+G</span></code> is pressed, it will not do it now. You can also
<code class="docutils literal"><span class="pre">return</span> <span class="pre">'break'</span></code> from other callbacks to indicate whether other plugins
should handle that event (see <a class="reference internal" href="#shift-tab">Shift-Tab</a> below).</p>
<p>Of course, you can also create <strong>non-global</strong> bindings normally with the
<code class="docutils literal"><span class="pre">bind()</span></code> method of any other widget.</p>
</div>
<div class="section" id="shift-tab">
<h3>Shift-Tab<a class="headerlink" href="#shift-tab" title="Permalink to this headline">¶</a></h3>
<p>A common thing to do in plugins is to bind something on the text widget of
every <a class="reference internal" href="tabs.html#porcupine.tabs.FileTab" title="porcupine.tabs.FileTab"><code class="xref py py-class docutils literal"><span class="pre">FileTab</span></code></a>. The callbacks may
<code class="docutils literal"><span class="pre">return</span> <span class="pre">'break'</span></code> to prevent other plugins from handling the same event.</p>
<p>For example, if you’re implementing an autocompleter plugin you might be
tempted to write this:</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">porcupine</span> <span class="k">import</span> <span class="n">tabs</span>

<span class="k">def</span> <span class="nf">on_tab</span><span class="p">(</span><span class="n">event</span><span class="p">):</span>
    <span class="k">if</span> <span class="n">we_can_complete</span><span class="p">():</span>
        <span class="n">complete_next_alternative</span><span class="p">()</span>

<span class="k">def</span> <span class="nf">on_shift_tab</span><span class="p">(</span><span class="n">event</span><span class="p">):</span>
    <span class="k">if</span> <span class="n">we_can_complete</span><span class="p">():</span>
        <span class="n">complete_previous_alternative</span><span class="p">()</span>

<span class="k">def</span> <span class="nf">on_new_tab</span><span class="p">(</span><span class="n">tab</span><span class="p">):</span>
    <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">tab</span><span class="p">,</span> <span class="n">tabs</span><span class="o">.</span><span class="n">FileTab</span><span class="p">):</span>
        <span class="n">tab</span><span class="o">.</span><span class="n">bind</span><span class="p">(</span><span class="s1">&#39;&lt;Tab&gt;&#39;</span><span class="p">,</span> <span class="n">on_tab</span><span class="p">)</span>
        <span class="n">tab</span><span class="o">.</span><span class="n">bind</span><span class="p">(</span><span class="s1">&#39;&lt;Shift-Tab&gt;&#39;</span><span class="p">,</span> <span class="n">on_tab</span><span class="p">)</span>

<span class="c1"># here&#39;s some code that runs on_new_tab() when a new tab is added</span>
</pre></div>
</div>
<p><strong>This code is also bad!</strong> First of all, it’s not using <code class="docutils literal"><span class="pre">add=True</span></code>, but
<code class="docutils literal"><span class="pre">&lt;Shift-Tab&gt;</span></code> is also limited to Windows and OSX; it doesn’t work at all on
Linux. What’s more, any other plugins that handle Tab presses would get
notified of those tab presses that this plugin was able to autocomplete with
(except that they might not work at all because <code class="docutils literal"><span class="pre">add=True</span></code> wasn’t used).</p>
<p>Let’s fix this crap with <code class="docutils literal"><span class="pre">add=True</span></code>, <code class="docutils literal"><span class="pre">return</span> <span class="pre">'break'</span></code> and
<a class="reference internal" href="utils.html#porcupine.utils.bind_tab_key" title="porcupine.utils.bind_tab_key"><code class="xref py py-func docutils literal"><span class="pre">porcupine.utils.bind_tab_key()</span></code></a>:</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">porcupine</span> <span class="k">import</span> <span class="n">tabs</span><span class="p">,</span> <span class="n">utils</span>

<span class="c1"># this plugin handles all tab presses and returns &#39;break&#39; from them, you</span>
<span class="c1"># need this if you bind &lt;Tab&gt;</span>
<span class="n">setup_before</span> <span class="o">=</span> <span class="p">[</span><span class="s1">&#39;tabs2spaces&#39;</span><span class="p">]</span>

<span class="k">def</span> <span class="nf">on_tab</span><span class="p">(</span><span class="n">event</span><span class="p">,</span> <span class="n">shift_pressed</span><span class="p">):</span>
    <span class="k">if</span> <span class="n">we_can_complete</span><span class="p">():</span>
        <span class="k">if</span> <span class="n">shift_pressed</span><span class="p">:</span>
            <span class="n">complete_previous_alternative</span><span class="p">()</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">complete_next_alternative</span><span class="p">()</span>
        <span class="k">return</span> <span class="s1">&#39;break&#39;</span>    <span class="c1"># don&#39;t notify other plugins about this event</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="k">return</span> <span class="kc">None</span>    <span class="c1"># let other plugins do whatever they want to</span>

<span class="k">def</span> <span class="nf">on_new_tab</span><span class="p">(</span><span class="n">tab</span><span class="p">):</span>
    <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">tab</span><span class="p">,</span> <span class="n">tabs</span><span class="o">.</span><span class="n">FileTab</span><span class="p">):</span>
        <span class="n">utils</span><span class="o">.</span><span class="n">bind_tab_key</span><span class="p">(</span><span class="n">tab</span><span class="p">,</span> <span class="n">on_tab</span><span class="p">)</span>
</pre></div>
</div>
<p>See <a class="reference external" href="https://github.com/Akuli/porcupine/tree/master/porcupine/plugins/indent_block.py">porcupine/plugins/indent_block.py</a> for a complete example plugin.</p>
</div>
</div>
</div>


          </div>
        </div>
      </div>
      <div class="sphinxsidebar" role="navigation" aria-label="main navigation">
        <div class="sphinxsidebarwrapper">
  <h3><a href="index.html">Table Of Contents</a></h3>
  <ul>
<li><a class="reference internal" href="#">Introduction to Writing Plugins</a><ul>
<li><a class="reference internal" href="#where-are-the-plugins">Where are the plugins?</a></li>
<li><a class="reference internal" href="#hello-world">Hello World!</a></li>
<li><a class="reference internal" href="#a-step-back">A Step Back</a></li>
<li><a class="reference internal" href="#porcupine-s-widgets">Porcupine’s Widgets</a></li>
<li><a class="reference internal" href="#virtual-events">Virtual Events</a></li>
<li><a class="reference internal" href="#potential-pitfalls">Potential Pitfalls</a><ul>
<li><a class="reference internal" href="#use-add-true">Use add=True</a></li>
<li><a class="reference internal" href="#binding-key-presses">Binding Key Presses</a></li>
<li><a class="reference internal" href="#shift-tab">Shift-Tab</a></li>
</ul>
</li>
</ul>
</li>
</ul>
<div class="relations">
<h3>Related Topics</h3>
<ul>
  <li><a href="index.html">Documentation overview</a><ul>
      <li>Previous: <a href="index.html" title="previous chapter">Welcome to Porcupine’s plugin API documentation!</a></li>
      <li>Next: <a href="porcupine.html" title="next chapter"><code class="docutils literal"><span class="pre">porcupine</span></code> — The top level Porcupine package</a></li>
  </ul></li>
</ul>
</div>
  <div role="note" aria-label="source link">
    <h3>This Page</h3>
    <ul class="this-page-menu">
      <li><a href="_sources/plugin-intro.rst.txt"
            rel="nofollow">Show Source</a></li>
    </ul>
   </div>
<div id="searchbox" style="display: none" role="search">
  <h3>Quick search</h3>
    <form class="search" action="search.html" method="get">
      <div><input type="text" name="q" /></div>
      <div><input type="submit" value="Go" /></div>
      <input type="hidden" name="check_keywords" value="yes" />
      <input type="hidden" name="area" value="default" />
    </form>
</div>
<script type="text/javascript">$('#searchbox').show(0);</script>
        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="footer">
      &copy;2017, Akuli.
      
      |
      Powered by <a href="http://sphinx-doc.org/">Sphinx 1.6.3</a>
      &amp; <a href="https://github.com/bitprophet/alabaster">Alabaster 0.7.10</a>
      
      |
      <a href="_sources/plugin-intro.rst.txt"
          rel="nofollow">Page source</a>
    </div>

    

    
  </body>
</html>